<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rafallo Login</title>

    <link rel="icon" href="/pages/login/css/logo_1.png" type="image/x-icon">
    <link rel="stylesheet" href="/pages/login/css/base.css">
    <link rel="stylesheet" href="/pages/login/css/container.css">
    <link rel="stylesheet" href="/pages/login/css/forgot-password.css">
    <link rel="stylesheet" href="/pages/login/css/LoginButton.css">
    <link rel="stylesheet" href="/pages/login/css/LoginInput.css">
    <link rel="stylesheet" href="/pages/login/css/logo.css">
    <link rel="stylesheet" href="/pages/login/css/sign-up.css">
    <link rel="stylesheet" href="/pages/login/css/typography.css">
    <link rel="stylesheet" href="/pages/login/css/user-guide.css">
    <link rel="stylesheet" href="/pages/login/css/authForget.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">


    <!-- Add this script -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script type="module" src="/pages/login/login.js" defer></script>
    <script type="module" src="/pages/login/authForgot.js" defer></script>
</head>

<body>
    <div class="container-glass">
        <img src="/pages/login/css/logo_1.png" alt="Rafallo Logo" class="logo" />

        <h2>User Login</h2>

        <form id="loginForm">
            <input type="email" id="loginEmail" placeholder="Email" required />

            <div class="password-container">
                <input type="password" id="loginPassword" placeholder="Password" required>
                <i class="fa-solid fa-eye-slash" id="togglePassword"></i>
            </div>

            <div class="forgot-password">
                <a href="#" id="reset" class="link-blue">Forgot Password?</a>
            </div>

            <button id="loginBtn">Login</button>

            <div class="signup-message">
                Don't have an account?
                <a href="/pages/register/register.html" class="link-blue">Sign Up</a>
            </div>
        </form>

        <div class="divider"></div>
        <p style="font-size: 0.85rem; color: rgba(255, 255, 255, 0.8); margin-bottom: 0.75rem;">
            For admin users only
        </p>
        <a href="/pages/admin/login/adminLogin.html" class="admin-login-btn">
            Admin Log-In
        </a>

    </div>

    <!-- Floating User Guide Button -->
    <div class="guide-container" id="openGuide">
        <span>User Guide</span>
        <i class="fa-solid fa-circle-question guide-icon"></i>  
    </div>

    <!-- Video Modal -->
    <div class="guide-modal" id="guideModal">
        <div class="guide-content">
            <video controls>
                <source src="/pages/login/css/user-guide.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>


    <script>
        $(document).ready(function () {
            const $guideModal = $("#guideModal");
            const $guideVideo = $guideModal.find("video")[0]; // get the <video> element

            // --- Toggle password visibility ---
            $("#togglePassword").on("click", function () {
                const $password = $("#loginPassword");
                const isHidden = $password.attr("type") === "password";
                $password.attr("type", isHidden ? "text" : "password");
                $(this).toggleClass("fa-eye", isHidden).toggleClass("fa-eye-slash", !isHidden);
            });

            // --- Open guide modal ---
            $("#openGuide, #openGuideText").on("click", function () {
                $guideModal.addClass("active");
                $guideVideo.play(); // auto-play when modal opens
            });

            // --- Close modal ---
            $guideModal.on("click", function (e) {
                // Close only if clicked on overlay or close button
                if (e.target.id === "guideModal" || e.target.id === "closeGuide") {
                    $guideModal.removeClass("active");
                    $guideVideo.pause();        // stop video
                    $guideVideo.currentTime = 0; // reset video to start
                }
            });
        });
    </script>

</body>

</html>